# Groth16 Verifier Contract

Soroban smart contract that verifies Groth16 zero-knowledge proofs over BLS12-381 and BN254.

This project demonstrates how Groth16 verifiers can be generated and executed on Stellar Soroban, using snarkjs-compatible JSON artifacts produced by multiple ZK toolchains.

This example was presented at the [Stellar Developer Meeting - 12/19/2024](https://www.youtube.com/watch?v=51SitOUZySk&list=PLmr3tp_7-7Gg5IAsJ0VlgfMoh-aTmbQmh&index=4)

## Supported Toolchains

Proofs and verification keys generated by:

- [Circom](https://docs.circom.io/)
- [Gnark (Go)](https://github.com/Consensys/gnark)
- [Arkworks (Rust)](https://github.com/arkworks-rs)
- [Noname](https://github.com/zksecurity/noname): [Article about integration with SnarkJS](https://blog.zksecurity.xyz/posts/noname-r1cs/)

## Repository Structure

The `./data/` directory is organized by ZK toolchain: e.g. `data/circom` (Circom/snarkjs), `data/gnark` (Go/gnark), `data/arkworks` (Rust/arkworks). Each subdirectory holds circuit definitions, inputs, and the generated proof artifacts for that toolchain.

For proof verification, three key files are required per toolchain. **Example for Circom** (`data/circom/`):

- [proof.json](./data/circom/proof.json) — zero-knowledge proof
- [verification_key.json](./data/circom/verification_key.json) — verification key
- [public.json](./data/circom/public.json) — public inputs/outputs

Intermediate artifacts (witness code, Powers of Tau outputs, etc.) live under `./data/circom/auxiliary` (see [data/circom/README.md](./data/circom/README.md) for the Circom setup steps).

For gnark BLS12-381, circuit definitions and setup code are in `./data/gnark/auxiliary` (see [data/gnark/README.md](./data/gnark/README.md)).

For gnark BN254, circuit definitions and setup code are in `./data/gnark_bn254/auxiliary` (see [data/gnark_bn254/README.md](./data/gnark_bn254/README.md)).

For arkworks, circuit definitions and setup code are in `./data/arkworks/auxiliary` (see [data/arkworks/README.md](./data/arkworks/README.md)).

## Usage

```sh
cd groth16_verifier

cargo install soroban-verifier-gen

# bls12-381
soroban-verifier-gen --vk data/circom/verification_key.json --out contracts/circom_verifier --crate-name circom_verifier
soroban-verifier-gen --vk data/gnark/verification_key.json --out contracts/gnark_verifier --crate-name gnark_verifier
soroban-verifier-gen --vk data/arkworks/verification_key.json --out contracts/ark_verifier --crate-name ark_verifier

# bn254
soroban-verifier-gen --vk data/gnark_bn254/verification_key.json --out contracts/gnark_bn254_verifier --crate-name gnark_bn254_verifier --curve bn254
```

---

## ⚠️ WARNING: Demonstration Use Only

**This project is for demonstration purposes only.**

- It has **not** undergone security auditing
- It is **not** safe for use in production environments

**Use at your own risk.**
